<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>School-wise Performance - Program Coordinator Dashboard</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- DataTables Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">

    <!-- jQuery (required for DataTables) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="school-performance.css">
    <!-- Sidebar JS -->
    <script src="sidebar.js"></script>
    <!-- Header JS -->
    <script src="header.js"></script>

    <style>
        /* Critical Responsive Fixes */
        html, body {
            max-width: 100vw;
            overflow-x: hidden;
        }

        /* Prevent FOUC - hide containers until loaded */
        #sidebar-container:empty,
        #header-container:empty {
            opacity: 0;
            visibility: hidden;
        }

        #sidebar-container.loaded,
        #header-container.loaded {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.2s ease-in;
        }

        /* Override DataTables Default Styles for Responsiveness */
        .dataTables_wrapper {
            width: 100% !important;
            max-width: 100% !important;
        }

        table.dataTable {
            width: 100% !important;
        }

        /* Ensure all major containers don't overflow */
        .dashboard-container,
        .main-content,
        .school-performance-page,
        .filters-section,
        .kpi-grid,
        .charts-section,
        .performance-table-card {
            max-width: 100%;
            overflow-x: hidden;
        }

        /* Bootstrap Table Styling */
        .table> :not(caption)>*>* {
            padding: 0.85rem 1.25rem;
            vertical-align: middle;
        }

        .table thead th {
            font-size: 0.75rem;
            letter-spacing: 0.02em;
            color: #6b7280;
            text-transform: uppercase;
            border-bottom: 1px solid #e5e7eb;
            background: #f9fafb;
            font-weight: 600;
        }

        .table tbody td {
            color: #111827;
        }

        div.dataTables_wrapper div.dataTables_length select {
            width: 70px !important;
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Include Sidebar Component -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Include Header Component -->
            <div id="header-container"></div>

            <!-- School Performance Content -->
            <div class="school-performance-page">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="page-header-content">
                        <h1 class="page-title">
                            <span class="material-symbols-outlined page-title-icon">trending_up</span>
                            School-wise Performance
                        </h1>
                        <p class="page-subtitle">Comprehensive performance analysis of all assigned schools</p>
                    </div>
                    <div class="page-header-actions">
                        <button class="btn-export">
                            <span class="material-symbols-outlined">download</span>
                            Export Report
                        </button>
                    </div>
                </div>

                <!-- Filters Section -->
                <div class="filters-section">
                    <div class="search-box">
                        <span class="material-symbols-outlined search-icon">search</span>
                        <input type="text" class="search-input" placeholder="Search schools by name or location...">
                    </div>
                    <div class="filters-group">
                        <div class="filter-item">
                            <label class="filter-label">City</label>
                            <select class="filter-select" id="cityFilter">
                                <option value="">All Cities</option>
                                <option value="delhi">New Delhi</option>
                                <option value="mumbai">Mumbai</option>
                                <option value="bangalore">Bangalore</option>
                                <option value="pune">Pune</option>
                                <option value="hyderabad">Hyderabad</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label class="filter-label">Grade</label>
                            <select class="filter-select" id="gradeFilter">
                                <option value="">All Grades</option>
                                <option value="1">Grade 1</option>
                                <option value="2">Grade 2</option>
                                <option value="3">Grade 3</option>
                                <option value="4">Grade 4</option>
                                <option value="5">Grade 5</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label class="filter-label">Year</label>
                            <select class="filter-select" id="yearFilter">
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label class="filter-label">Status</label>
                            <select class="filter-select" id="statusFilter">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="warning">Needs Attention</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                        <button class="btn-reset-filters">
                            <span class="material-symbols-outlined">refresh</span>
                            Reset
                        </button>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="kpi-grid">
                    <div class="kpi-card highlight">
                        <div class="kpi-icon best">
                            <span class="material-symbols-outlined">emoji_events</span>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Highest Performing School</div>
                            <div class="kpi-value">Delhi Public School</div>
                            <div class="kpi-meta">
                                <span class="kpi-badge excellent">92% Performance</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card highlight">
                        <div class="kpi-icon worst">
                            <span class="material-symbols-outlined">trending_down</span>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Lowest Performing School</div>
                            <div class="kpi-value">Modern Bridge School</div>
                            <div class="kpi-meta">
                                <span class="kpi-badge needs-attention">72% Performance</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon performance">
                            <span class="material-symbols-outlined">analytics</span>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Overall Avg Performance</div>
                            <div class="kpi-value">84.2%</div>
                            <div class="kpi-meta">
                                <span class="kpi-trend up">
                                    <span class="material-symbols-outlined">arrow_upward</span>
                                    +3.5% from last month
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon teachers">
                            <span class="material-symbols-outlined">groups</span>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Total Teachers</div>
                            <div class="kpi-value">89</div>
                            <div class="kpi-meta">
                                <span class="kpi-subtext">Across 12 schools</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon students">
                            <span class="material-symbols-outlined">diversity_3</span>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Total Students</div>
                            <div class="kpi-value">2,456</div>
                            <div class="kpi-meta">
                                <span class="kpi-subtext">Active enrollment</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon assignment">
                            <span class="material-symbols-outlined">assignment_turned_in</span>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-label">Avg Assignment Completion</div>
                            <div class="kpi-value">87.3%</div>
                            <div class="kpi-meta">
                                <span class="kpi-trend up">
                                    <span class="material-symbols-outlined">arrow_upward</span>
                                    +2.1%
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-card chart-card-large">
                        <div class="chart-card-header">
                            <div>
                                <h3 class="chart-title">School Performance Comparison</h3>
                                <p class="chart-subtitle">Overall performance metrics across all schools</p>
                            </div>
                            <div class="chart-actions">
                                <button class="btn-chart-toggle active" data-chart="bar">
                                    <span class="material-symbols-outlined">bar_chart</span>
                                </button>
                                <button class="btn-chart-toggle" data-chart="line">
                                    <span class="material-symbols-outlined">show_chart</span>
                                </button>
                                <button class="btn-chart-toggle" data-chart="radar">
                                    <span class="material-symbols-outlined">radar</span>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-card-header">
                            <div>
                                <h3 class="chart-title">Performance Trends</h3>
                                <p class="chart-subtitle">Last 6 months average</p>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="trendsChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Performance Table -->
                <div class="card performance-table-card">
                    <div class="table-wrapper-outer">
                        <div class="table-responsive">
                            <table id="schoolPerformanceTable" class="table mb-0 align-middle">
                            <thead>
                                <tr>
                                    <th scope="col">School Name</th>
                                    <th scope="col">Location</th>
                                    <th scope="col">Students</th>
                                    <th scope="col">Teachers</th>
                                    <th scope="col">Avg Performance</th>
                                    <th scope="col">Attendance</th>
                                    <th scope="col">Assignment Completion</th>
                                    <th scope="col">Alerts</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Delhi Public School</div>
                                                <div class="school-code">Code: DPS001</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            New Delhi
                                        </div>
                                    </td>
                                    <td><span class="number-badge">420</span></td>
                                    <td><span class="number-badge">15</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill excellent" style="width: 92%;"></div>
                                            </div>
                                            <span class="progress-value">92%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill excellent" style="width: 94%;"></div>
                                            </div>
                                            <span class="progress-value">94%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 88%;"></div>
                                            </div>
                                            <span class="progress-value">88%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            0
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Kendriya Vidyalaya</div>
                                                <div class="school-code">Code: KV002</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Mumbai
                                        </div>
                                    </td>
                                    <td><span class="number-badge">350</span></td>
                                    <td><span class="number-badge">12</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 88%;"></div>
                                            </div>
                                            <span class="progress-value">88%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 90%;"></div>
                                            </div>
                                            <span class="progress-value">90%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 86%;"></div>
                                            </div>
                                            <span class="progress-value">86%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            0
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">St. Andrews Academy</div>
                                                <div class="school-code">Code: SAA003</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Bangalore
                                        </div>
                                    </td>
                                    <td><span class="number-badge">280</span></td>
                                    <td><span class="number-badge">10</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 85%;"></div>
                                            </div>
                                            <span class="progress-value">85%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 87%;"></div>
                                            </div>
                                            <span class="progress-value">87%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 82%;"></div>
                                            </div>
                                            <span class="progress-value">82%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge warning">
                                            <span class="material-symbols-outlined">warning</span>
                                            2
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Green Dale School</div>
                                                <div class="school-code">Code: GDS004</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Pune
                                        </div>
                                    </td>
                                    <td><span class="number-badge">195</span></td>
                                    <td><span class="number-badge">8</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 78%;"></div>
                                            </div>
                                            <span class="progress-value">78%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 80%;"></div>
                                            </div>
                                            <span class="progress-value">80%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 75%;"></div>
                                            </div>
                                            <span class="progress-value">75%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge warning">
                                            <span class="material-symbols-outlined">warning</span>
                                            3
                                        </span>
                                    </td>
                                    <td><span class="status-badge warning">Needs Attention</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Modern Bridge School</div>
                                                <div class="school-code">Code: MBS005</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Hyderabad
                                        </div>
                                    </td>
                                    <td><span class="number-badge">168</span></td>
                                    <td><span class="number-badge">7</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill needs-attention" style="width: 72%;"></div>
                                            </div>
                                            <span class="progress-value">72%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill needs-attention" style="width: 74%;"></div>
                                            </div>
                                            <span class="progress-value">74%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill needs-attention" style="width: 68%;"></div>
                                            </div>
                                            <span class="progress-value">68%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge critical">
                                            <span class="material-symbols-outlined">error</span>
                                            5
                                        </span>
                                    </td>
                                    <td><span class="status-badge critical">Critical</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Sunrise International</div>
                                                <div class="school-code">Code: SI006</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            New Delhi
                                        </div>
                                    </td>
                                    <td><span class="number-badge">310</span></td>
                                    <td><span class="number-badge">11</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 86%;"></div>
                                            </div>
                                            <span class="progress-value">86%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 88%;"></div>
                                            </div>
                                            <span class="progress-value">88%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 84%;"></div>
                                            </div>
                                            <span class="progress-value">84%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            1
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Oxford High School</div>
                                                <div class="school-code">Code: OHS007</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Mumbai
                                        </div>
                                    </td>
                                    <td><span class="number-badge">265</span></td>
                                    <td><span class="number-badge">9</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill excellent" style="width: 90%;"></div>
                                            </div>
                                            <span class="progress-value">90%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill excellent" style="width: 92%;"></div>
                                            </div>
                                            <span class="progress-value">92%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 89%;"></div>
                                            </div>
                                            <span class="progress-value">89%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            0
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Cambridge Academy</div>
                                                <div class="school-code">Code: CA008</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Bangalore
                                        </div>
                                    </td>
                                    <td><span class="number-badge">225</span></td>
                                    <td><span class="number-badge">8</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 81%;"></div>
                                            </div>
                                            <span class="progress-value">81%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 83%;"></div>
                                            </div>
                                            <span class="progress-value">83%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 79%;"></div>
                                            </div>
                                            <span class="progress-value">79%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge warning">
                                            <span class="material-symbols-outlined">warning</span>
                                            2
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">National Public School</div>
                                                <div class="school-code">Code: NPS009</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Pune
                                        </div>
                                    </td>
                                    <td><span class="number-badge">180</span></td>
                                    <td><span class="number-badge">7</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 83%;"></div>
                                            </div>
                                            <span class="progress-value">83%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 85%;"></div>
                                            </div>
                                            <span class="progress-value">85%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 80%;"></div>
                                            </div>
                                            <span class="progress-value">80%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            1
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Bharatiya Vidya Bhavan</div>
                                                <div class="school-code">Code: BVB010</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Hyderabad
                                        </div>
                                    </td>
                                    <td><span class="number-badge">205</span></td>
                                    <td><span class="number-badge">8</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 79%;"></div>
                                            </div>
                                            <span class="progress-value">79%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 81%;"></div>
                                            </div>
                                            <span class="progress-value">81%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill needs-attention" style="width: 76%;"></div>
                                            </div>
                                            <span class="progress-value">76%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge warning">
                                            <span class="material-symbols-outlined">warning</span>
                                            3
                                        </span>
                                    </td>
                                    <td><span class="status-badge warning">Needs Attention</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Wisdom World School</div>
                                                <div class="school-code">Code: WWS011</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            New Delhi
                                        </div>
                                    </td>
                                    <td><span class="number-badge">245</span></td>
                                    <td><span class="number-badge">9</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 87%;"></div>
                                            </div>
                                            <span class="progress-value">87%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 89%;"></div>
                                            </div>
                                            <span class="progress-value">89%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 85%;"></div>
                                            </div>
                                            <span class="progress-value">85%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            0
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <div class="school-cell">
                                            <div class="school-info">
                                                <div class="school-name">Ryan International</div>
                                                <div class="school-code">Code: RI012</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="location-cell">
                                            <span class="material-symbols-outlined">location_on</span>
                                            Mumbai
                                        </div>
                                    </td>
                                    <td><span class="number-badge">290</span></td>
                                    <td><span class="number-badge">10</span></td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 84%;"></div>
                                            </div>
                                            <span class="progress-value">84%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill good" style="width: 86%;"></div>
                                            </div>
                                            <span class="progress-value">86%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="progress-cell">
                                            <div class="progress-bar">
                                                <div class="progress-fill average" style="width: 82%;"></div>
                                            </div>
                                            <span class="progress-value">82%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="alert-badge success">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            1
                                        </span>
                                    </td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>
                                        <button class="btn-view-details">
                                            <span class="material-symbols-outlined">visibility</span>
                                            View Details
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Load Sidebar and Header Components
        document.addEventListener('DOMContentLoaded', function () {
            Promise.all([
                fetch('sidebar.html').then(response => response.text()),
                fetch('header.html').then(response => response.text())
            ]).then(([sidebarHTML, headerHTML]) => {
                document.getElementById('sidebar-container').innerHTML = sidebarHTML;
                document.getElementById('header-container').innerHTML = headerHTML;

                setTimeout(() => {
                    if (typeof initializeHeader === 'function') {
                        initializeHeader();
                    }

                    document.getElementById('sidebar-container').classList.add('loaded');
                    document.getElementById('header-container').classList.add('loaded');

                    setActiveMenuItem();
                }, 200);
            });

            // Initialize Charts
            initializeCharts();

            // Initialize Interactive Features
            initializeFilters();
            initializeDataTable();
            initializeButtons();
        });

        function setActiveMenuItem() {
            const navSchoolPerformance = document.getElementById('nav-school-performance');
            if (navSchoolPerformance) {
                navSchoolPerformance.classList.add('active');
            }
        }

        // Initialize DataTable with Bootstrap styling
        function initializeDataTable() {
            $('#schoolPerformanceTable').DataTable({
                paging: true,
                pageLength: 10,
                lengthMenu: [5, 10, 25, 50],
                order: [[4, 'desc']], // Sort by Avg Performance descending
                columnDefs: [
                    { orderable: false, targets: 9 } // Actions column not sortable
                ],
                language: {
                    search: 'Search schools:',
                    lengthMenu: 'Show _MENU_ entries',
                    info: 'Showing _START_ to _END_ of _TOTAL_ schools',
                    infoEmpty: 'No schools to show',
                    infoFiltered: '(_MAX_ total)',
                    zeroRecords: 'No matching schools found',
                    paginate: {
                        next: 'Next',
                        previous: 'Previous'
                    }
                },
                dom: '<"datatable-header d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-between gap-3 p-3 border-bottom"l<"w-100"f>><"table-scroll-wrapper"t><"datatable-footer d-flex flex-column flex-lg-row align-items-start align-items-lg-center justify-content-between gap-3 p-3 border-top"ip>'
            });
        }

        // Initialize Filters
        function initializeFilters() {
            const filters = document.querySelectorAll('.filter-select');
            const resetBtn = document.querySelector('.btn-reset-filters');

            filters.forEach(filter => {
                filter.addEventListener('change', function() {
                    console.log(`Filter ${this.id} changed to: ${this.value}`);
                    // Custom filter logic can be added here if needed
                });
            });

            if (resetBtn) {
                resetBtn.addEventListener('click', function() {
                    filters.forEach(filter => filter.value = '');
                    console.log('Filters reset');
                });
            }
        }

        // Initialize Action Buttons
        function initializeButtons() {
            // Export button
            const exportBtn = document.querySelector('.btn-export');
            if (exportBtn) {
                exportBtn.addEventListener('click', function() {
                    alert('Export functionality will generate a comprehensive report of school performance data.');
                    console.log('Exporting school performance report...');
                });
            }
        }

        // Initialize Charts
        function initializeCharts() {
            // Performance Comparison Chart
            const performanceCtx = document.getElementById('performanceChart');
            if (performanceCtx) {
                const performanceChart = new Chart(performanceCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Delhi Public School', 'Oxford High', 'Kendriya Vidyalaya', 'Wisdom World', 'Sunrise Intl', 'St. Andrews', 'Ryan Intl', 'National Public', 'Cambridge', 'Bharatiya Vidya', 'Green Dale', 'Modern Bridge'],
                        datasets: [{
                            label: 'Performance %',
                            data: [92, 90, 88, 87, 86, 85, 84, 83, 81, 79, 78, 72],
                            backgroundColor: [
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderColor: [
                                'rgb(16, 185, 129)',
                                'rgb(16, 185, 129)',
                                'rgb(59, 130, 246)',
                                'rgb(59, 130, 246)',
                                'rgb(59, 130, 246)',
                                'rgb(59, 130, 246)',
                                'rgb(59, 130, 246)',
                                'rgb(245, 158, 11)',
                                'rgb(245, 158, 11)',
                                'rgb(245, 158, 11)',
                                'rgb(245, 158, 11)',
                                'rgb(239, 68, 68)'
                            ],
                            borderWidth: 2,
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                titleFont: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                bodyFont: {
                                    size: 13
                                },
                                borderColor: 'rgba(255, 255, 255, 0.1)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function (value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });

                // Chart Toggle Functionality
                const chartToggles = document.querySelectorAll('.btn-chart-toggle');
                chartToggles.forEach(toggle => {
                    toggle.addEventListener('click', function () {
                        chartToggles.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');

                        const chartType = this.dataset.chart;
                        performanceChart.config.type = chartType;
                        performanceChart.update();
                    });
                });
            }

            // Trends Chart
            const trendsCtx = document.getElementById('trendsChart');
            if (trendsCtx) {
                new Chart(trendsCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Average Performance',
                            data: [78, 80, 82, 81, 83, 84.2],
                            borderColor: 'rgb(107, 39, 126)',
                            backgroundColor: 'rgba(107, 39, 126, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 5,
                            pointBackgroundColor: 'rgb(107, 39, 126)',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                padding: 12,
                                borderColor: 'rgba(255, 255, 255, 0.1)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function (value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }
    </script>
</body>

</html>
